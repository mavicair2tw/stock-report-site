<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Built to Collect. Designed to Scale.</title>
    <style>
      :root {
        --bg: #0b1020;
        --bg2: #0a1226;
        --panel: #121a2f;
        --line: #253252;
        --text: #e6edf3;
        --muted: #9fb0c3;
        --accent: #60a5fa;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        min-height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
        color: var(--text);
      }
      .wrap { max-width: 1100px; margin: 0 auto; padding: 32px 20px; }
      .top-bar{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-bottom:10px}
      .logo{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:10px;border:1px solid #35558d;background:linear-gradient(135deg,#132547 0%,#1c3563 100%);color:#dbeafe;font-weight:800;font-size:13px}
      .weather-box{min-width:280px;max-width:360px;padding:10px 12px;border-radius:10px;border:1px solid #2a3a5e;background:#101a33;color:#dbeafe;font-size:13px}
      .weather-meta{color:#b9cae6;line-height:1.45}
      .top-tags{display:flex;flex-wrap:wrap;gap:10px}
      .nav-item{display:flex;flex-direction:column;gap:4px;align-items:flex-start}
      .tag{display:inline-block;padding:6px 10px;border-radius:999px;border:1px solid #35558d;color:#cfe2ff;text-decoration:none;font-size:12px;font-weight:700}
      .tag-sub{color:#8fa3bf;font-size:11px;line-height:1;padding-left:8px}
      .tag.active{border-color:#60a5fa;background:#1a315f;color:#fff}
      .hero-tag {
        display: inline-block;
        padding: 6px 12px;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        border: 1px solid #35558d;
        background: linear-gradient(135deg, #132547 0%, #1c3563 100%);
        color: #cfe2ff;
        margin-bottom: 14px;
      }
      h1 {
        margin: 0 0 10px;
        font-size: 34px;
        line-height: 1.2;
        background: linear-gradient(90deg, #ffffff 0%, #b7d0ff 45%, #8ab4ff 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      .sub { margin: 0 0 20px; color: var(--muted); }
      .counter { color: var(--muted); margin-bottom: 20px; }
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
        gap: 12px;
      }
      .card {
        display: block;
        text-decoration: none;
        color: var(--text);
        border: 1px solid var(--line);
        border-radius: 12px;
        padding: 16px;
        background: var(--panel);
        transition: transform .12s ease, border-color .12s ease;
      }
      .card:hover { transform: translateY(-2px); border-color: var(--accent); }
      .name { font-weight: 700; margin-bottom: 6px; }
      .desc { color: var(--muted); font-size: 14px; }
      .hero-image-wrap{margin:14px 0 18px}
      .hero-image{width:100%;max-width:1100px;border-radius:14px;border:1px solid var(--line);display:block}
      .foot { margin-top: 20px; color: var(--muted); font-size: 13px; }
    
      .site-link{margin-top:18px;color:var(--muted);font-size:13px}
      .site-link a{color:#93c5fd;text-decoration:none}
      .site-link a:hover{text-decoration:underline}
    </style>
  </head>
  <body>
    <main class="wrap">
      <h1>Built to Collect. Designed to Scale.</h1>
      <div class="top-bar">
        <div style="display:flex;gap:10px;align-items:flex-start;flex-wrap:wrap;">
          <div class="logo">openai-tw.com</div>
          <div class="weather-box" id="weatherBox">
            <div class="weather-meta" id="weatherMeta">è®€å–è£ç½®ä½ç½®ä¸­â€¦</div>
          </div>
        </div>
        <div style="display:flex;gap:10px;align-items:flex-start;flex-wrap:wrap;justify-content:flex-end;">
          <form class="quick-search" action="/search/" method="get" style="display:flex;gap:8px;align-items:center;">
            <input name="q" type="text" placeholder="Search keyword..." style="width:220px;max-width:42vw;background:#0f1730;color:#e6edf3;border:1px solid #223055;border-radius:999px;padding:6px 10px;font-size:12px;" />
            <button type="submit" style="padding:6px 10px;border-radius:999px;border:1px solid #35558d;background:#1a315f;color:#fff;font-size:12px;font-weight:700;cursor:pointer;">Search</button>
          </form>
        </div>
      </div>
      <div class="hero-image-wrap">
        <img class="hero-image" src="/assets/hero.jpg" alt="Main page visual" />
      </div>
      <p class="sub">ä¸»å…¥å£ï¼šé¸æ“‡ä½ è¦çœ‹çš„å ±è¡¨èˆ‡å…§å®¹ã€‚</p>
      <div class="counter" id="viewCounter">é»é–±æ•¸ï¼š--</div>

      <section class="grid">
        <a class="card" href="/tw/">
          <div class="name">å°è‚¡ 15 åˆ†é˜</div>
          <div class="desc">å°è‚¡å³æ™‚å ±è¡¨ã€æ¼²è·Œèˆ‡æ‘˜è¦</div>
        </a>
        <a class="card" href="/us/">
          <div class="name">ç¾è‚¡ 15 åˆ†é˜</div>
          <div class="desc">ç¾è‚¡å³æ™‚å ±è¡¨ã€æ¼²è·Œèˆ‡æ‘˜è¦</div>
        </a>
        <a class="card" href="/btc-hourly/">
          <div class="name">BTC æ¯å°æ™‚</div>
          <div class="desc">æ¯”ç‰¹å¹£åƒ¹æ ¼èˆ‡è®ŠåŒ–</div>
        </a>
        <a class="card" href="/tw-news/">
          <div class="name">å°è‚¡æ–°è</div>
          <div class="desc">å°è‚¡æ–°èæ•´ç†</div>
        </a>
        <a class="card" href="/us-news/">
          <div class="name">ç¾è‚¡æ–°è</div>
          <div class="desc">ç¾è‚¡æ–°èæ•´ç†</div>
        </a>
        <a class="card" href="/interesting-stories/">
          <div class="name">æ¯æ—¥æœ‰è¶£æ•…äº‹</div>
          <div class="desc">æ¯æ—¥è¼•é¬†é–±è®€å…§å®¹</div>
        </a>
        <a class="card" href="/coffee-news/">
          <div class="name">æ¯æ—¥å’–å•¡æ–°è</div>
          <div class="desc">å’–å•¡ç›¸é—œè³‡è¨Šèˆ‡è¶¨å‹¢</div>
        </a>
        <a class="card" href="/podcast/">
          <div class="name">Podcast</div>
          <div class="desc">éŸ³è¨Šå…§å®¹å…¥å£</div>
        </a>
        <a class="card" href="/search/">
          <div class="name">Search</div>
        </a>
        <a class="card" href="/music/">
          <div class="name">Music</div>
          <div class="desc">Spotify éŸ³æ¨‚æ’­æ”¾æ¸…å–®</div>
        </a>
        <a class="card" href="/stock-search/">
          <div class="name">è‚¡å¸‚</div>
          <div class="desc">ç¾ä»£åŒ–è‚¡ç¥¨æœå°‹èˆ‡ K ç·šåˆ†æé é¢</div>
        </a>
        <a class="card" href="/forum/">
          <div class="name">Forum</div>
          <div class="desc">è¨ªå®¢å¯ä»¥ç•™è¨€è¨è«–æˆ–åˆ†äº«äº‹ç‰©</div>
        </a>
        <a class="card" href="/tag-cloud/">
          <div class="name">Tag Cloud</div>
          <div class="desc">äº’å‹•å¼é—œéµå­—é›²ï¼šå­—ç´šã€é¡è‰²ã€å½¢ç‹€èˆ‡ç¯©é¸</div>
        </a>
        <a class="card" href="/ziweidoushu/">
          <div class="name">ç´«å¾®æ–—æ•¸</div>
          <div class="desc">å‘½ç›¤è¨ˆç®—ã€é‹å‹¢åˆ†æèˆ‡ AI è§£æ</div>
        </a>
      </section>

      <div class="foot">æç¤ºï¼šç¶ è‰² = ä¸Šæ¼²ï¼Œç´…è‰² = ä¸‹è·Œã€‚</div>
          <div class="site-link"><a href="https://openai-tw.com/">openai-tw.com</a></div>
    </main>

    <script>
      const pageKey = `views:${location.pathname}`;
      const pageViews = Number(localStorage.getItem(pageKey) || '0') + 1;
      localStorage.setItem(pageKey, String(pageViews));
      const el = document.getElementById('viewCounter');
      if (el) el.textContent = `é»é–±æ•¸ï¼š${pageViews}`;

      function windDir(deg){
        const dirs = ['åŒ—','æ±åŒ—','æ±','æ±å—','å—','è¥¿å—','è¥¿','è¥¿åŒ—'];
        return dirs[Math.round((((deg % 360) + 360) % 360) / 45) % 8];
      }

      async function reverseArea(lat, lon){
        try {
          // Prefer OSM reverse geocoding for district/city names (zh-TW)
          const u = `https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}&addressdetails=1&accept-language=zh-TW`;
          const r = await fetch(u, { headers: { 'Accept': 'application/json' } });
          const d = await r.json();
          const a = d?.address || {};

          const candidates = [
            a.suburb,
            a.city_district,
            a.town,
            a.city,
            a.county,
            a.state,
            d?.name,
            d?.display_name,
          ].filter(Boolean);

          let area = String(candidates[0] || '').split(',')[0].trim();
          if (!area) return '';

          // Avoid generic/airport-like names
          if (/airport|æ©Ÿå ´/i.test(area) && candidates[1]) area = String(candidates[1]).trim();
          if (/^songshan$/i.test(area)) area = 'å°åŒ—';
          return area;
        } catch {
          return '';
        }
      }

      function weatherIcon(code){
        if (code === 0) return 'â˜€ï¸';
        if ([1,2].includes(code)) return 'ğŸŒ¤ï¸';
        if (code === 3) return 'â˜ï¸';
        if ([45,48].includes(code)) return 'ğŸŒ«ï¸';
        if ([51,53,55,56,57].includes(code)) return 'ğŸŒ¦ï¸';
        if ([61,63,65,66,67,80,81,82].includes(code)) return 'ğŸŒ§ï¸';
        if ([71,73,75,77,85,86].includes(code)) return 'ğŸŒ¨ï¸';
        if ([95,96,99].includes(code)) return 'â›ˆï¸';
        return 'ğŸŒ¡ï¸';
      }

      async function loadWeatherByLocation(lat, lon, areaHint = ''){
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,wind_direction_10m,weather_code&timezone=auto`;
        const res = await fetch(url);
        const data = await res.json();

        const current = data.current || {};
        const meta = document.getElementById('weatherMeta');
        if (!meta) return;
        const area = areaHint || await reverseArea(lat, lon);
        const icon = weatherIcon(current.weather_code);
        const parts = [
          ...(area ? [area] : []),
          `${icon} æº«åº¦ ${current.temperature_2m ?? 'N/A'}Â°C`,
          `é¢¨å‘ ${windDir(current.wind_direction_10m ?? 0)} (${current.wind_direction_10m ?? 'N/A'}Â°)`,
          `æ¿•æ°£ ${current.relative_humidity_2m ?? 'N/A'}%`
        ];
        meta.textContent = parts.join(' ï½œ ');
      }

      async function loadWeatherByIP(){
        const r = await fetch('https://ipapi.co/json/');
        const d = await r.json();
        const lat = d?.latitude;
        const lon = d?.longitude;
        if (lat == null || lon == null) throw new Error('ip location unavailable');
        const area = d?.city || d?.region || d?.country_name || '';
        await loadWeatherByLocation(lat, lon, area);
      }

      (function initWeather(){
        const meta = document.getElementById('weatherMeta');
        if (!meta) return;
        if (!navigator.geolocation) {
          loadWeatherByIP().catch(() => {
            loadWeatherByLocation(25.0330, 121.5654, 'å°åŒ—å¸‚').catch(() => {
              meta.textContent = 'ç„¡æ³•è®€å–å¤©æ°£è³‡æ–™ã€‚';
            });
          });
          return;
        }
        navigator.geolocation.getCurrentPosition(
          pos => {
            loadWeatherByLocation(pos.coords.latitude, pos.coords.longitude).catch(() => {
              meta.textContent = 'å¤©æ°£è³‡æ–™è®€å–å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚';
            });
          },
          () => {
            loadWeatherByIP().catch(() => {
              loadWeatherByLocation(25.0330, 121.5654, 'å°åŒ—å¸‚').catch(() => {
                meta.textContent = 'æœªæˆæ¬Šä½ç½®å­˜å–ï¼Œä¸”ç„¡æ³•è®€å–æ›¿ä»£å¤©æ°£è³‡æ–™ã€‚';
              });
            });
          },
          { enableHighAccuracy: false, timeout: 8000, maximumAge: 300000 }
        );
      })();
    </script>
  </body>
</html>
